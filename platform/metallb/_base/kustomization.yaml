apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- helm.yaml
components:
  - "../../_components/namespace"
patches:
  # Patch to add pod-security labels into namespace
  # Needed by MetalLb
  - patch: |-
      apiVersion: v1
      kind: Namespace
      metadata:
        name: not-used-at-all
          labels:
            pod-security.kubernetes.io/enforce: privileged
            pod-security.kubernetes.io/audit: privileged
            pod-security.kubernetes.io/warn: privileged
    target:
      kind: Namespace